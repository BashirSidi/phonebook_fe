{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bashirsalisusidi/Documents/DEV/TKTL/TKTL_Exercises/partThree/phonebook_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bashirsalisusidi/Documents/DEV/TKTL/TKTL_Exercises/partThree/phonebook_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/bashirsalisusidi/Documents/DEV/TKTL/TKTL_Exercises/partThree/phonebook_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Search from'./components/Search.js';import Form from'./components/Form.js';import Phonebook from'./components/Phonebook.js';import personService from'./services/persons.js';import Notification from'./components/Notification.js';var App=function App(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),NewName=_useState2[0],setNewName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),NewNumber=_useState4[0],setNewNumber=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),Query=_useState6[0],setQuery=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),Persons=_useState8[0],setPersons=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),ErrorMessage=_useState10[0],setErrorMessage=_useState10[1];//===========================================================================\nfunction fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var initialPersons;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return personService.getAll();case 2:initialPersons=_context2.sent;setPersons(initialPersons);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchData.apply(this,arguments);}useEffect(function(){fetchData();},[]);//===========================================================================\nvar handleNameChange=function handleNameChange(event){setNewName(event.target.name=event.target.value);};var handleQueryChange=function handleQueryChange(event){setQuery(event.target.search=event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.number=event.target.value);};//===========================================================================\nvar addName=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var fName,fNumber,newObject,result,pers,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();fName=Persons.find(function(p){return p.name===NewName;});fNumber=Persons.find(function(p){return p.number===NewNumber;});if(!(NewName!==''&&NewNumber!=='')){_context.next=16;break;}newObject={name:NewName,number:NewNumber,id:Persons.length+2};if(!(fName||fNumber)){_context.next=10;break;}result=window.confirm(\"\".concat(NewName,\" is already added to phonebook, replace the old number with a new one ?\"));if(result){pers=Persons.filter(function(p){return p.name===NewName||p.number===NewNumber;});pers.map(function(p){var newObject={name:p.name,number:NewNumber,id:p.id};return personService.update(p.id,newObject);});fetchData();}_context.next=16;break;case 10:_context.next=12;return personService.create(newObject);case 12:data=_context.sent;setErrorMessage(\"Added \".concat(data.name,\".\"));setTimeout(function(){setErrorMessage(null);},2000);setPersons(Persons.concat(data));case 16:setNewNumber('');setNewName('');case 18:case\"end\":return _context.stop();}}},_callee);}));return function addName(_x){return _ref.apply(this,arguments);};}();//==============================================================================\nvar handleClick=function handleClick(person){var result=window.confirm(\"Delete \".concat(person.name,\" ?\"));if(result){try{personService.deleteData(person.id);fetchData();}catch(error){console.log(error);}}};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Phonebook\"),/*#__PURE__*/React.createElement(Notification,{message:ErrorMessage}),/*#__PURE__*/React.createElement(Search,{handleQueryChange:handleQueryChange,Query:Query}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Form,{handleNameChange:handleNameChange,handleNumberChange:handleNumberChange,NewName:NewName,NewNumber:NewNumber,addName:addName}),/*#__PURE__*/React.createElement(Phonebook,{Persons:Persons,Query:Query,handleClick:handleClick}));};export default App;","map":{"version":3,"sources":["/Users/bashirsalisusidi/Documents/DEV/TKTL/TKTL_Exercises/partThree/phonebook_fe/src/App.js"],"names":["React","useState","useEffect","Search","Form","Phonebook","personService","Notification","App","NewName","setNewName","NewNumber","setNewNumber","Query","setQuery","Persons","setPersons","ErrorMessage","setErrorMessage","fetchData","getAll","initialPersons","handleNameChange","event","target","name","value","handleQueryChange","search","handleNumberChange","number","addName","preventDefault","fName","find","p","fNumber","newObject","id","length","result","window","confirm","pers","filter","map","update","create","data","setTimeout","concat","handleClick","person","deleteData","error","console","log"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Search from './components/Search.js';\nimport Form from './components/Form.js';\nimport Phonebook from './components/Phonebook.js';\nimport personService from './services/persons.js';\nimport Notification from './components/Notification.js';\nconst App = () => {\n\tconst [ NewName, setNewName ] = useState('');\n\tconst [ NewNumber, setNewNumber ] = useState('');\n\tconst [ Query, setQuery ] = useState('');\n\tconst [ Persons, setPersons ] = useState([]);\n\tconst [ ErrorMessage, setErrorMessage ] = useState(null);\n\t//===========================================================================\n\tasync function fetchData() {\n\t\tconst initialPersons = await personService.getAll();\n\t\tsetPersons(initialPersons);\n\t}\n\tuseEffect(() => {\n\t\tfetchData();\n\t}, []);\n\n\t//===========================================================================\n\n\tconst handleNameChange = (event) => {\n\t\tsetNewName((event.target.name = event.target.value));\n\t};\n\n\tconst handleQueryChange = (event) => {\n\t\tsetQuery((event.target.search = event.target.value));\n\t};\n\n\tconst handleNumberChange = (event) => {\n\t\tsetNewNumber((event.target.number = event.target.value));\n\t};\n\n\t//===========================================================================\n\n\tconst addName = async (event) => {\n\t\tevent.preventDefault();\n\t\tconst fName = Persons.find((p) => p.name === NewName);\n\t\tconst fNumber = Persons.find((p) => p.number === NewNumber);\n\t\tif (NewName !== '' && NewNumber !== '') {\n\t\t\tvar newObject = {\n\t\t\t\tname: NewName,\n\t\t\t\tnumber: NewNumber,\n\t\t\t\tid: Persons.length + 2\n\t\t\t};\n\t\t\tif (fName || fNumber) {\n\t\t\t\tconst result = window.confirm(\n\t\t\t\t\t`${NewName} is already added to phonebook, replace the old number with a new one ?`\n\t\t\t\t);\n\t\t\t\tif (result) {\n\t\t\t\t\tconst pers = Persons.filter(\n\t\t\t\t\t\t(p) => p.name === NewName || p.number === NewNumber\n\t\t\t\t\t);\n\n\t\t\t\t\tpers.map((p) => {\n\t\t\t\t\t\tconst newObject = {\n\t\t\t\t\t\t\tname: p.name,\n\t\t\t\t\t\t\tnumber: NewNumber,\n\t\t\t\t\t\t\tid: p.id\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn personService.update(p.id, newObject);\n\t\t\t\t\t});\n\t\t\t\t\tfetchData();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst data = await personService.create(newObject);\n\t\t\t\tsetErrorMessage(`Added ${data.name}.`);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetErrorMessage(null);\n\t\t\t\t}, 2000);\n\t\t\t\tsetPersons(Persons.concat(data));\n\t\t\t}\n\t\t}\n\t\tsetNewNumber('');\n\t\tsetNewName('');\n\t};\n\n\t//==============================================================================\n\n\tconst handleClick = (person) => {\n\t\tconst result = window.confirm(`Delete ${person.name} ?`);\n\t\tif (result) {\n\t\t\ttry {\n\t\t\t\tpersonService.deleteData(person.id);\n\t\t\t\tfetchData();\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t}\n\t};\n\treturn (\n\t\t<div>\n\t\t\t<h1>Phonebook</h1>\n\t\t\t<Notification message={ErrorMessage} />\n\t\t\t<Search handleQueryChange={handleQueryChange} Query={Query} />\n\t\t\t<br />\n\t\t\t<br />\n\t\t\t<Form\n\t\t\t\thandleNameChange={handleNameChange}\n\t\t\t\thandleNumberChange={handleNumberChange}\n\t\t\t\tNewName={NewName}\n\t\t\t\tNewNumber={NewNumber}\n\t\t\t\taddName={addName}\n\t\t\t/>\n\t\t\t<Phonebook Persons={Persons} Query={Query} handleClick={handleClick} />\n\t\t</div>\n\t);\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}